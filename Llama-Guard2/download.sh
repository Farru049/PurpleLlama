#!/usr/bin/env bash
# Copyright (c) Meta Platforms, Inc. and affiliates.
#
# This source code is licensed under the MIT license found in the
# LICENSE file in the root directory of this source tree.

set -e
read -p "Enter the URL from email: " https://download5.llamameta.net/*?Policy=eyJTdGF0ZW1lbnQiOlt7InVuaXF1ZV9oYXNoIjoibnRrdnZvd3R3dHFhZWZvcHBpZ25oaHh0IiwiUmVzb3VyY2UiOiJodHRwczpcL1wvZG93bmxvYWQ1LmxsYW1hbWV0YS5uZXRcLyoiLCJDb25kaXRpb24iOnsiRGF0ZUxlc3NUaGFuIjp7IkFXUzpFcG9jaFRpbWUiOjE3MTU0MzM3MTJ9fX1dfQ__&Signature=XRQH7kas9d-viJLZ3o4e1dxM23yNek4oRyF0E3pnuQrDDELGO8rn0VCnbft4W1yyzadANu5rNLqKudrUm9WmjeJqTAEHU2s96M%7EZ%7EcDazbexooI5JE-ZsOnVHDo6WWtNiXvnPYOoOYPeuPbrTuX4mJ4zb%7EZcFXQRYsKoHxPoVep8tYTLx7qYLlwqzanaWM4bqlz4sKEdvWf-hMFYHqmoKrLxBroZ2mbCAalJ5SfLuiXeUqVXe6yhuns1K4HAOfniWkfhAPdd5GedL7MOF7HoPhuUpp5Eg6Ob6eYLn3EnrJgZSXrQC0LtXzUHoM30QoiywiQhmwRLe%7E1-ncHVOR-%7E
echo ""
TARGET_FOLDER="."             # where all files should end up
mkdir -p ${TARGET_FOLDER}

echo "Downloading LICENSE and Acceptable Usage Policy"
wget --continue ${https://download5.llamameta.net/*?Policy=eyJTdGF0ZW1lbnQiOlt7InVuaXF1ZV9oYXNoIjoibnRrdnZvd3R3dHFhZWZvcHBpZ25oaHh0IiwiUmVzb3VyY2UiOiJodHRwczpcL1wvZG93bmxvYWQ1LmxsYW1hbWV0YS5uZXRcLyoiLCJDb25kaXRpb24iOnsiRGF0ZUxlc3NUaGFuIjp7IkFXUzpFcG9jaFRpbWUiOjE3MTU0MzM3MTJ9fX1dfQ__&Signature=XRQH7kas9d-viJLZ3o4e1dxM23yNek4oRyF0E3pnuQrDDELGO8rn0VCnbft4W1yyzadANu5rNLqKudrUm9WmjeJqTAEHU2s96M%7EZ%7EcDazbexooI5JE-ZsOnVHDo6WWtNiXvnPYOoOYPeuPbrTuX4mJ4zb%7EZcFXQRYsKoHxPoVep8tYTLx7qYLlwqzanaWM4bqlz4sKEdvWf-hMFYHqmoKrLxBroZ2mbCAalJ5SfLuiXeUqVXe6yhuns1K4HAOfniWkfhAPdd5GedL7MOF7HoPhuUpp5Eg6Ob6eYLn3EnrJgZSXrQC0LtXzUHoM30QoiywiQhmwRLe%7E1-ncHVOR-%7E/'*'/"LICENSE"} -O ${TARGET_FOLDER}"/LICENSE"
wget --continue ${https://download5.llamameta.net/*?Policy=eyJTdGF0ZW1lbnQiOlt7InVuaXF1ZV9oYXNoIjoibnRrdnZvd3R3dHFhZWZvcHBpZ25oaHh0IiwiUmVzb3VyY2UiOiJodHRwczpcL1wvZG93bmxvYWQ1LmxsYW1hbWV0YS5uZXRcLyoiLCJDb25kaXRpb24iOnsiRGF0ZUxlc3NUaGFuIjp7IkFXUzpFcG9jaFRpbWUiOjE3MTU0MzM3MTJ9fX1dfQ__&Signature=XRQH7kas9d-viJLZ3o4e1dxM23yNek4oRyF0E3pnuQrDDELGO8rn0VCnbft4W1yyzadANu5rNLqKudrUm9WmjeJqTAEHU2s96M%7EZ%7EcDazbexooI5JE-ZsOnVHDo6WWtNiXvnPYOoOYPeuPbrTuX4mJ4zb%7EZcFXQRYsKoHxPoVep8tYTLx7qYLlwqzanaWM4bqlz4sKEdvWf-hMFYHqmoKrLxBroZ2mbCAalJ5SfLuiXeUqVXe6yhuns1K4HAOfniWkfhAPdd5GedL7MOF7HoPhuUpp5Eg6Ob6eYLn3EnrJgZSXrQC0LtXzUHoM30QoiywiQhmwRLe%7E1-ncHVOR-%7E/'*'/"USE_POLICY.md"} -O ${TARGET_FOLDER}"/USE_POLICY.md"


echo "Downloading tokenizer"
wget --continue ${https://download5.llamameta.net/*?Policy=eyJTdGF0ZW1lbnQiOlt7InVuaXF1ZV9oYXNoIjoibnRrdnZvd3R3dHFhZWZvcHBpZ25oaHh0IiwiUmVzb3VyY2UiOiJodHRwczpcL1wvZG93bmxvYWQ1LmxsYW1hbWV0YS5uZXRcLyoiLCJDb25kaXRpb24iOnsiRGF0ZUxlc3NUaGFuIjp7IkFXUzpFcG9jaFRpbWUiOjE3MTU0MzM3MTJ9fX1dfQ__&Signature=XRQH7kas9d-viJLZ3o4e1dxM23yNek4oRyF0E3pnuQrDDELGO8rn0VCnbft4W1yyzadANu5rNLqKudrUm9WmjeJqTAEHU2s96M%7EZ%7EcDazbexooI5JE-ZsOnVHDo6WWtNiXvnPYOoOYPeuPbrTuX4mJ4zb%7EZcFXQRYsKoHxPoVep8tYTLx7qYLlwqzanaWM4bqlz4sKEdvWf-hMFYHqmoKrLxBroZ2mbCAalJ5SfLuiXeUqVXe6yhuns1K4HAOfniWkfhAPdd5GedL7MOF7HoPhuUpp5Eg6Ob6eYLn3EnrJgZSXrQC0LtXzUHoM30QoiywiQhmwRLe%7E1-ncHVOR-%7E/'*'/"llama-guard-2/tokenizer.model"} -O ${TARGET_FOLDER}"/tokenizer.model"
wget --continue ${https://download5.llamameta.net/*?Policy=eyJTdGF0ZW1lbnQiOlt7InVuaXF1ZV9oYXNoIjoibnRrdnZvd3R3dHFhZWZvcHBpZ25oaHh0IiwiUmVzb3VyY2UiOiJodHRwczpcL1wvZG93bmxvYWQ1LmxsYW1hbWV0YS5uZXRcLyoiLCJDb25kaXRpb24iOnsiRGF0ZUxlc3NUaGFuIjp7IkFXUzpFcG9jaFRpbWUiOjE3MTU0MzM3MTJ9fX1dfQ__&Signature=XRQH7kas9d-viJLZ3o4e1dxM23yNek4oRyF0E3pnuQrDDELGO8rn0VCnbft4W1yyzadANu5rNLqKudrUm9WmjeJqTAEHU2s96M%7EZ%7EcDazbexooI5JE-ZsOnVHDo6WWtNiXvnPYOoOYPeuPbrTuX4mJ4zb%7EZcFXQRYsKoHxPoVep8tYTLx7qYLlwqzanaWM4bqlz4sKEdvWf-hMFYHqmoKrLxBroZ2mbCAalJ5SfLuiXeUqVXe6yhuns1K4HAOfniWkfhAPdd5GedL7MOF7HoPhuUpp5Eg6Ob6eYLn3EnrJgZSXrQC0LtXzUHoM30QoiywiQhmwRLe%7E1-ncHVOR-%7E/'*'/"llama-guard-2/consolidated.00.pth"} -O ${TARGET_FOLDER}"/consolidated.00.pth"
wget --continue ${https://download5.llamameta.net/*?Policy=eyJTdGF0ZW1lbnQiOlt7InVuaXF1ZV9oYXNoIjoibnRrdnZvd3R3dHFhZWZvcHBpZ25oaHh0IiwiUmVzb3VyY2UiOiJodHRwczpcL1wvZG93bmxvYWQ1LmxsYW1hbWV0YS5uZXRcLyoiLCJDb25kaXRpb24iOnsiRGF0ZUxlc3NUaGFuIjp7IkFXUzpFcG9jaFRpbWUiOjE3MTU0MzM3MTJ9fX1dfQ__&Signature=XRQH7kas9d-viJLZ3o4e1dxM23yNek4oRyF0E3pnuQrDDELGO8rn0VCnbft4W1yyzadANu5rNLqKudrUm9WmjeJqTAEHU2s96M%7EZ%7EcDazbexooI5JE-ZsOnVHDo6WWtNiXvnPYOoOYPeuPbrTuX4mJ4zb%7EZcFXQRYsKoHxPoVep8tYTLx7qYLlwqzanaWM4bqlz4sKEdvWf-hMFYHqmoKrLxBroZ2mbCAalJ5SfLuiXeUqVXe6yhuns1K4HAOfniWkfhAPdd5GedL7MOF7HoPhuUpp5Eg6Ob6eYLn3EnrJgZSXrQC0LtXzUHoM30QoiywiQhmwRLe%7E1-ncHVOR-%7E/'*'/"llama-guard-2/params.json"} -O ${TARGET_FOLDER}"/params.json"
